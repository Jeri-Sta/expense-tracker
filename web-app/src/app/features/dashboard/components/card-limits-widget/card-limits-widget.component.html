<div class="data-card surface-card shadow-2 border-round-lg">
  <!-- Card Header -->
  <div class="card-header p-4 border-bottom-1 surface-border">
    <div class="flex justify-content-between align-items-center">
      <div>
        <h5 class="font-bold text-color m-0">Limites dos Cartões</h5>
        <p class="text-color-secondary text-sm m-0">Uso do limite de crédito</p>
      </div>
      <p-button
        label="Ver Todos"
        icon="pi pi-external-link"
        [text]="true"
        size="small"
        routerLink="/credit-cards"
      ></p-button>
    </div>
  </div>

  <!-- Card Content -->
  <div class="card-content p-4">
    <!-- Overall Summary -->
    <div class="overall-summary mb-4 p-3 surface-100 border-round" *ngIf="creditCards.length > 0">
      <div class="flex justify-content-between align-items-end mb-2">
        <div>
          <span class="text-color-secondary text-sm">Total Utilizado</span>
          <div class="text-xl font-bold text-color">{{ formatCurrency(getTotalUsed()) }}</div>
        </div>
        <div class="text-right">
          <span class="text-color-secondary text-sm">Disponível</span>
          <div class="text-lg font-semibold text-green-500">
            {{ formatCurrency(getTotalAvailable()) }}
          </div>
        </div>
      </div>
      <p-progressBar
        [value]="getOverallUsagePercentage()"
        [showValue]="false"
        [style]="{ height: '10px' }"
        [styleClass]="getProgressBarClass(getOverallUsagePercentage())"
      ></p-progressBar>
      <div class="text-xs text-color-secondary mt-1 text-right">
        {{ getOverallUsagePercentage() | number: '1.0-0' }}% do limite total
      </div>
    </div>

    <!-- Individual Cards -->
    <div class="cards-list" *ngIf="creditCards.length > 0">
      <div
        class="card-item flex align-items-center gap-3 py-3 px-3 border-round hover:surface-hover border-bottom-1 surface-border"
        *ngFor="let card of creditCards; let last = last"
        [class.border-none]="last"
      >
        <div class="card-color-badge" [style.background-color]="card.color"></div>
        <div class="flex-1">
          <div class="flex justify-content-between align-items-center mb-1">
            <span class="font-medium text-color">{{ card.name }}</span>
            <span
              class="text-sm font-semibold"
              [class]="'text-' + getUsageSeverity(card.usagePercentage) + '-500'"
            >
              {{ formatCurrency(card.usedLimit) }}
            </span>
          </div>
          <p-progressBar
            [value]="card.usagePercentage"
            [showValue]="false"
            [style]="{ height: '6px' }"
            [styleClass]="getProgressBarClass(card.usagePercentage)"
          ></p-progressBar>
          <div class="flex justify-content-between mt-1">
            <span class="text-xs text-color-secondary">
              Disponível: {{ formatCurrency(card.availableLimit) }}
            </span>
            <span class="text-xs text-color-secondary">
              {{ card.usagePercentage | number: '1.0-0' }}%
            </span>
          </div>
        </div>
      </div>
    </div>

    <!-- Empty State -->
    <div class="text-center py-4 text-color-secondary" *ngIf="creditCards.length === 0">
      <i class="pi pi-credit-card text-4xl mb-2" style="display: block"></i>
      <p class="m-0 mb-2">Nenhum cartão cadastrado</p>
      <a routerLink="/credit-cards" class="text-primary text-sm">Cadastrar cartão</a>
    </div>
  </div>
</div>
