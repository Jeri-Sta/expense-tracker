#!/bin/bash

# Personal Expense Tracker - Development Setup Script

echo \"ğŸš€ Setting up Personal Expense Tracker development environment...\"\necho \"\"\n\n# Check if Docker is running\nif ! docker info > /dev/null 2>&1; then\n    echo \"âŒ Docker is not running. Please start Docker and try again.\"\n    exit 1\nfi\n\necho \"âœ… Docker is running\"\n\n# Copy environment file\nif [ ! -f .env ]; then\n    cp .env.example .env\n    echo \"âœ… Environment file created (.env)\"\nelse\n    echo \"â„¹ï¸  Environment file already exists\"\nfi\n\n# Start the development environment\necho \"\"\necho \"ğŸ³ Starting development environment...\"\ndocker-compose up -d postgres redis\n\n# Wait for PostgreSQL to be ready\necho \"â³ Waiting for PostgreSQL to be ready...\"\nwhile ! docker-compose exec postgres pg_isready -h localhost -p 5432 > /dev/null 2>&1; do\n    echo \"   Still waiting for PostgreSQL...\"\n    sleep 2\ndone\necho \"âœ… PostgreSQL is ready\"\n\n# Install backend dependencies and start\necho \"\"\necho \"ğŸ“¦ Installing backend dependencies...\"\ncd api\nnpm install\necho \"ğŸš€ Starting backend server...\"\nnpm run start:dev &\nBACKEND_PID=$!\ncd ..\n\n# Install frontend dependencies and start\necho \"\"\necho \"ğŸ“¦ Installing frontend dependencies...\"\ncd web-app\nnpm install\necho \"ğŸš€ Starting frontend server...\"\nnpm run start &\nFRONTEND_PID=$!\ncd ..\n\necho \"\"\necho \"ğŸ‰ Development environment is starting up!\"\necho \"\"\necho \"ğŸ“ Access points:\"\necho \"   Frontend: http://localhost:4200\"\necho \"   Backend API: http://localhost:3000\"\necho \"   API Docs: http://localhost:3000/api-docs\"\necho \"   PostgreSQL: localhost:5432\"\necho \"   Redis: localhost:6379\"\necho \"\"\necho \"â„¹ï¸  Press Ctrl+C to stop all services\"\necho \"\"\n\n# Wait for processes\nwait $BACKEND_PID $FRONTEND_PID